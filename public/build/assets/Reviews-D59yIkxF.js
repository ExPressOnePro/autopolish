import{r as t,a as h,j as a}from"./app-DB1ors5_.js";import{a as b}from"./axiosInstance-Bs-_w5HP.js";function f(){const[c,i]=t.useState([]),[d,x]=t.useState(""),[l,m]=t.useState(""),[o,p]=t.useState(5),[u,s]=t.useState("");t.useEffect(()=>{h.get("/reviews").then(e=>i(e.data))},[]);const g=async e=>{if(e.preventDefault(),!l||!o){s("Пожалуйста, заполните все обязательные поля.");return}const n=new FormData;n.append("name",d),n.append("message",l),n.append("rating",o),s("Отправка...");try{const r=await b.post("/reviews",n,{headers:{"Content-Type":"multipart/form-data"}});r.data.status==="success"?(s("Спасибо за отзыв!"),i([r.data.review,...c]),m(""),x("")):s(r.data.message||"Ошибка при отправке.")}catch(r){console.error(r),s("Ошибка, попробуйте позже.")}};return a.jsx("section",{className:"py-16 px-4 bg-gray-900",children:a.jsxs("div",{className:"max-w-4xl mx-auto bg-gray-800 rounded-3xl p-8 shadow-xl",children:[a.jsx("h2",{className:"text-3xl text-white font-bold mb-6 text-center",children:"Отзывы клиентов"}),a.jsxs("form",{className:"space-y-4 mb-8",onSubmit:g,children:[a.jsx("input",{type:"text",placeholder:"Ваше имя (опционально)",value:d,onChange:e=>x(e.target.value),className:"w-full bg-gray-700 text-white border border-gray-600 rounded-xl px-4 py-2"}),a.jsx("textarea",{placeholder:"Ваш отзыв",value:l,onChange:e=>m(e.target.value),className:"w-full bg-gray-700 text-white border border-gray-600 rounded-xl px-4 py-2",rows:4}),a.jsx("select",{value:o,onChange:e=>p(e.target.value),className:"bg-gray-700 text-white border border-gray-600 rounded-xl px-4 py-2",children:[5,4,3,2,1].map(e=>a.jsxs("option",{value:e,children:[e," звезды"]},e))}),a.jsx("button",{type:"submit",className:"w-full bg-blue-600 py-3 text-white rounded-xl hover:bg-blue-700 transition",children:"Отправить отзыв"})]}),u&&a.jsx("p",{className:"text-center text-gray-300 mb-4",children:u}),a.jsx("div",{className:"space-y-4",children:c.map(e=>a.jsxs("div",{className:"bg-gray-700 p-4 rounded-xl shadow",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-semibold text-white",children:e.name||"Аноним"}),a.jsx("span",{className:"text-yellow-400",children:"★".repeat(e.rating)})]}),a.jsx("p",{className:"text-gray-300",children:e.message})]},e.id))})]})})}export{f as default};
